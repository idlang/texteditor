/*!
 * ==========================================================
 *  BBCODE TEXT EDITOR PLUGIN 0.0.1
 * ==========================================================
 * Author: Taufik Nurrohman <https://github.com/tovic>
 * License: MIT
 * ----------------------------------------------------------
 */
TE.BBCode=function(e,t){function m(e){return v(e).replace(/\[.*?\]/g,"").replace(/\s/g,"%20").replace(/"/g,"%22").replace(/\(/g,"%28").replace(/\)/g,"%29")}function v(e){return u(e.replace(/\s+/g," "))}var i=(window,document,new TE.HTML(e)),l=i.ui,a=i._,o=a.extend,u=(a.each,a.x,a.trim);a.edge,a.pattern,i.is;i.update(o({auto_p:0,advance_table:0,tools:"b i s | a img | p,h1,h2,h3,h4,h5,h6 | blockquote,q pre,code | ul ol | indent outdent | table | undo redo",union:{unit:["[","]"]},union_x:{unit:["\\\\\\[","\\\\\\]"]},formats:{b:"b",i:"i",u:"u",s:"s",a:"url",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",blockquote:"quote",q:"quote",pre:"code",code:"code",caption:""}},t),0),i.type="BBCode";var $=i.config,w=($.states,$.languages),y=$.formats,x=($.tab,w.placeholders);return o(l.tools,{a:{click:function(e,t){var r=y.a,n=w.modals.a;return/^[a-z]+:\/\/\S+$/.test(t.$().value)?(t.format(r),!1):(t.record().ui.prompt(["a[href]",n.title[0]],n.placeholder[0],1,function(e,t,n){t.format(r+"="+m(n))}),!1)}},img:{click:function(e,t){var r=y.img,n=w.modals.img;return t.$().length?(t.format(r),!1):(t.record().ui.prompt(["img[src]",n.title[0]],n.placeholder[0],1,function(e,t,n){t[0]().insert(m(n)).format(r)[1]()}),!1)}},sub:0,sup:0,abbr:0,p:{click:function(e,t){return t.$().length?(t.tidy("\n\n").replace(/([\t ]*\n[\t ]*){2,}/g,"\n\n"),!1):(t.tidy("\n\n").insert(x[""]),!1)}},"blockquote,q":{click:function(e,t){return t.format(y.blockquote,0,"\n\n","\n"),!1}},"pre,code":{click:function(e,t){return t.format(y.pre,0,"\n\n","\n"),!1}},hr:0}),o(l.keys,{"control+arrowup":0,"control+arrowdown":0,"control+shift+?":0,"control+r":0}),i.update({},0)};