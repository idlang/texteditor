/*!
 * ==========================================================
 *  BBCODE TEXT EDITOR PLUGIN 1.0.0
 * ==========================================================
 * Author: Taufik Nurrohman <https://github.com/tovic>
 * License: MIT
 * ----------------------------------------------------------
 */
TE.BBCode=function(e,t){function u(e){return c(e.replace(/\s+/g," "))}function p(e){return s(u(e),[/(<.*?>)|(\[.*?\])/g,/\s/g,'"',"(",")","[","]"],["","%20","%22","%28","%29","%5B","%5D"])}var i=(window,document,new TE.HTML(e,{auto_p:0,advance_table:0,tools:"clear | b i s | a img | p,h1,h2,h3,h4,h5,h6 | blockquote,q pre,code | ul ol | indent outdent | table | hr | undo redo",unit:[[["[","]"]],[["\\u005B","\\u005D"],["\\u003D","\\u0022","\\u0022","\\u0020|\\u003D"]]],formats:{b:"b",i:"i",u:"u",s:"s",a:"url",email:"email",p:"",blockquote:"quote",q:"quote",pre:"code",code:"code",ol:"list=1",ul:"list",li:"*",caption:""}})),l=i.ui,a=i._,o=a.extend,c=a.trim,s=a.replace;i.update(t,0),i.type="BBCode";var d=i.config,b=(d.states,d.languages),m=d.formats,v=(d.tab,b.placeholders);return o(l.tools,{a:{click:function(e,t){var r=m.a,n=b.modals.a,i=t.$().value;return/^[a-z]+:\/\/\S+$/i.test(i)?(t.format(r),!1):/^[\w.-]+@[\w.-]+(?:\.[\w.-]+)?$/i.test(i)?(t.format(m.email),!1):(t.record().ui.prompt(["a[href]",n.title[0]],n.placeholder[0],1,function(e,t,n){t.format(r+"="+p(n))}),!1)}},img:{click:function(e,t){var r=m.img,n=b.modals.img;return t.$().length?(t.format(r),!1):(t.record().ui.prompt(["img[src]",n.title[0]],n.placeholder[0],1,function(e,t,n){t[0]().format(r).insert(p(n))[1]()}),!1)}},abbr:0,p:{click:function(e,t){return t.$().length?(t.tidy("\n\n").replace(/([\t ]*\n[\t ]*){2,}/g,"\n\n"),!1):(t.tidy("\n\n").insert(v[""]),!1)}},"blockquote,q":{click:function(e,t){return t.format(m.blockquote,0,"\n\n","\n"),!1}},"pre,code":{click:function(e,t){return t.format(m.pre,0,"\n\n","\n"),!1}}}),o(l.keys,{"control+shift+?":0}),i.update({},0)};