TE.ui=function(e,t){function Te(e){return Y(e)?A(e).split(/\s+/):e}function ze(e){return I(e)?e.join(" "):e}function Se(e,t){return-1!==e.indexOf(t)}function Le(e){return Object.keys(e)}function Re(e){return e.length}function je(e){return Re(Le(e))}function Ze(e,t,n){return C(e)?C(t)?(C(O[e])||(O[e]={}),C(n)||(n=je(O[e])),O[e][n]=t,c):O[e]:O}function Ge(e,t){return C(e)?C(t)&&C(O[e])?(delete O[e][t],c):(O[e]={},c):(O={},c)}function Ne(e,t,n){if(!C(O[e]))return O[e]={},c;if(C(n))C(O[e][n])&&O[e][n].apply(c,t);else for(B in O[e])O[e][B].apply(c,t);return c}function Me(e,t,n){if(I(t))for(B in t)Me(e,B,t[B]);else e[(null===n?"remove":"set")+"Attribute"](t,n)}function Je(e,n,a){if(!n){for(t={},B=0,K=e.attributes,$=Re(K);$>B;++B)q=K[B],t[q.name]=q.value;return je(t)?t:C(a)?a:{}}if(Y(n))return Je(e,[n],[C(a)?a:""])[0];t=[];for(B in n)B=n[B],B=e.getAttribute(B)||"",t.push(B);return Re(t)?t:C(a)?a:[]}function De(e,t){if(I(t))for(B in t)De(e,t[B]);else if(C(t))e.removeAttribute(t);else for(De(e,"class"),B=0,K=e.attributes,$=Re(K);$>B;++B)K[B]&&De(e,K[B].name)}function He(e,t,n){if(I(t))for(B in t)He(e,B,t[B]);else Me(e,"data-"+t,n)}function Pe(e,n,a){if(!n){for(t={},B=0,K=e.attributes,$=Re(K);$>B;++B)q=K[B],"data-"===q.name.slice(0,5)&&(t[q.name]=q.value);return je(t)?t:C(a)?a:{}}if(Y(n))return Pe(e,[n],[C(a)?a:""])[0];t=[];for(B in n)B=n[B],B=Je(e,"data-"+B),t.push(B);return Re(t)?t:C(a)?a:[]}function Be(e,t){if(I(t))for(B in t)De(e,"data-"+t[B]);else if(C(t))De(e,"data-"+t);else for(B=0,K=e.attributes,$=Re(K);$>B;++B)K[B]&&"data-"===K[B].name.slice(0,5)&&De(e,K[B].name)}function Ke(e){return e&&e.preventDefault(),!1}function $e(e,t,n){if(t){for(e=Te(e),B=0,K=Re(e);K>B;++B)t.addEventListener(e[B],n,!1),Ze("on:"+e[B],n,rt(t));return c}}function qe(e,t,n){if(t){for(e=Te(e),B=0,K=Re(e);K>B;++B)t.removeEventListener(e[B],n,!1),Ge("on:"+e[B],rt(t));return U(t)&&t.id.split(":")[0]===St+"-dom"&&De(t,"id"),c}}function Fe(e,t,n){e=Te(e);var i,a="createEvent"in u;for(B=0,K=Re(e);K>B;++B)a?(i=u.createEvent("HTMLEvents"),i.data=n,i.initEvent(e[B],!0,!1),t.dispatchEvent(i)):Ne("on:"+e[B],n,rt(t));return c}function We(e,t,n){for(B=0,K=Re(t),$;K>B;++B)$=t[B],e=e.replace(w($)?$:p(d($),"g"),n&&n[B]||"");return e}function Xe(e,t){return e.replace(/%(\d+)/g,function(e,n){return--n,C(t[n])?t[n]:e})}function Ve(e){return A(We(e.toLowerCase(),[/[^ \/a-z\d-]/g,/([ -])+/g,/^-|-$/g],["-","$1",""]))}function Qe(e,t){var n=t.touches?t.touches[0].pageX:t.pageX,a=t.touches?t.touches[0].pageY:t.pageY,i=_e(e);return{x:n-i.l,y:a-i.t}}function _e(e){for(q=e.offsetLeft,ee=e.offsetTop;e=e.offsetParent;)q+=e.offsetLeft,ee+=e.offsetTop;return{l:q,t:ee}}function et(e){return e===r?{w:e.innerWidth,h:e.innerHeight}:{w:e.offsetWidth,h:e.offsetHeight}}function tt(e,t){for(;(e=ht(e))&&e!==t;);return e}function nt(e,t){t=Te(t);for(B in t)e.classList.add(t[B])}function at(e,n,a){if(!n)return t=Te(e.className),Re(t)?t:C(a)?a:[];if(Y(n))return at(e,[n],[C(a)?a:""])[0];t=[];for(B in n)B=n[B],e.classList.contains(B)&&t.push(B);return Re(t)?t:C(a)?a:[]}function it(e,t){if(C(t)){t=Te(t);for(B in t)e.classList.remove(t[B])}else De(e,"class")}function st(e,t){t=Te(t);for(B in t)e.classList.toggle(t[B])}function ot(e,t,n){if(e=e||"div",e=Y(e)?u.createElement(e):e,I(n))for(B in n)if(ne=n[B],"classes"===B)nt(e,ne);else if("data"===B)for(K in ne)ne=ne[K],null===ne?Be(e,K):He(e,K,ne);else"css"===B?Y(ne)?Me(e,"style",ne):null===ne?De(e,"style"):h(e,ne):k(ne)?e[B]=ne:null===ne?De(e,B):Me(e,B,m(ne)?ne.join(" "):""+ne);if(U(t))kt(e,t);else if(I(t))for(B in t)ne=t[B],U(ne)?kt(e,ne):ne!==!1&&ut(e,ne);else C(t)&&t!==!1&&ut(e,t);return e}function rt(e){var t=e.id;return t||(t=St+"-dom:"+Math.floor(Date.now()*Math.random()),e.id=t),t}function ut(e,t){e.innerHTML=t}function ct(e,t){return e.innerHTML||(C(t)?t:"")}function lt(e,t){if((!C(t)||t)&&(N=ft(e)))for(B=0,K=Re(N);K>B;++B)lt(N[B]);ut(e,"")}function ht(e){return e&&e.parentNode}function ft(e){return e&&e.children||[]}function dt(e,t){return C(t)?Y(t)?e.closest(t):tt(e,t):ht(e)}function gt(e){return e&&e.nextElementSibling}function pt(e){return e&&e.previousElementSibling}function Et(e){for(B=0;e=pt(e);)++B;return B}function vt(e,t){return e&&Y(t)?e.nodeName.toLowerCase()===t.toLowerCase():e&&k(t)?e===t(e):e===t}function At(e,n){if(!(n=C(n)?n:u))return[];if(t=[],Y(e)){if(/^[#.]?(?:\\.|[\w-]|[^\x00-\xa0])+$/.test(e)){if("#"===e[0]&&(e=n.getElementById(e.slice(1))))return[e];if("."===e[0]&&(e=n.getElementsByClassName(e.slice(1)))||(e=n.getElementsByTagName(e))){for(B=0,K=Re(e);K>B;++B)t.push(e[B]);return t}return[]}for(e=n.querySelectorAll(e),B=0,K=Re(e);K>B;++B)t.push(e[B]);return t}return Ot(e)?[e]:[]}function Ot(e,t){var n=ht(e);return 1===Re(arguments)?n||!1:e&&n===e?n:!1}function bt(e,t){X=ht(e),X&&X.insertBefore(t,e)}function yt(e,t){X=ht(e),X&&X.insertBefore(t,gt(e))}function Ut(e,t){N=e.firstChild,N?bt(N,t):kt(e,t)}function mt(e,t){kt(e,t)}function kt(e,t){e.appendChild(t)}function xt(e,t){var n=ht(e);if(n){if(!C(t)||t)for(N=e.firstChild;N;)xt(N);n.removeChild(e)}}function It(e,t){return e.cloneNode(C(t)?!!t:!0)}function wt(e,t){return ht(e).replaceChild(t,e),t}function Ct(e){lt(ot(e,!1,{style:""})),xt(e)}function Yt(e,t,n){return ot(t,n,{"class":e})}function an(e){return!e||C(e.active)&&!e.active}function sn(e,t,n){return k(e)&&(e={click:e}),Y(e.click)&&(e.click=(n[e.click]||{}).click),e.title=Lt[t]||"",C(e.attributes)||(e.attributes={}),n[t]&&(n[t]=e),e}function on(e){Tt.exit(0,0,0);var t=Pe(this,"tool-id"),n=Tt.tools,a=n[t];return Tt.drop.target=e.currentTarget||e.target,!an(a)&&k(K=a.click)&&(K=K(e,c,t),Ne("on:change",[e,c,t]),K===!1)?Ke(e):(c.select(),Ke(e))}function rn(e){if(ee=this,($=e.TE.key)(/^(escape|f10)$/))Tt.exit(1);else if($("enter")||$("arrowdown")&&Pe(ee,"ui-drop"))Tt.drop.target=ee,Fe(ue,ee,[e]);else if($("arrowright")&&(q=gt(ee))){for(;!vt(q,"a")&&q;)q=gt(q);q&&q.focus()}else if($("arrowleft")&&(q=pt(ee))){for(;!vt(q,"a")&&q;)q=pt(q);q&&q.focus()}return Ke(e)}function cn(){lt(Pt,0);var i,s,o,r,u,l,h,e=Tt.tools,t=Te(R.tools),n=St+"-button",a=St+"-separator";R.tools=t;for(l in t)h=t[l],s=e[h],(s||s==={})&&(s=sn(s,h,e),o=s.i||h,"|"===o||Se(o,"<")||(o=Ve(o)),r="|"!==o,u=Ve(h).replace(/[\/\s]/g,"-"),tn=Yt(r?n+" "+n+"-"+u:a+" "+a+"-"+l,r?"a":"span"),r?(tn=s.target||tn,i=n+":"+u,Me(tn,{href:Ce,id:i,tabindex:-1}),He(tn,"tool-id",h),o=Se(o,"<")?o:Tt.i(u,o),an(s)?nt(tn,"x"):it(tn,"x"),s.on?nt(tn,"on"):it(tn,"on"),s.text&&(o=Xe('<span class="'+St+'-text">'+s.text+"</span>",[o]),nt(tn,"text")),ut(tn,o),ot(tn,!1,s.attributes),!s.attributes.title&&(K=s.title)&&(tn.title=I(K)?K[0]+(K[1]?" ("+K[1]+")":""):K),$e(ue,tn,on),$e(de,tn,rn)):tn.id=a+":"+l,s.target=tn,(u=Pe(tn,un))&&Tt.menu.set(h,u),kt(Pt,tn));Ne("update.tools",[c])}function ln(){Tt.keys=function(){var n,e=Le(Tt.keys).sort().reverse(),t={};for(B=0,K=Re(e);K>B;++B)n=e[B],t[n]=Tt.keys[n];return t}(),fn(),Ne("update.keys",[c])}function hn(e){function g(e){return e.replace(/\+/g,"\n").replace(/\n\n/g,"\n+").split("\n")}var n=c.$(),a=n.before,i=n.after,s=a.slice(-1),o=i[0],r=n.length,u=Tt.keys,l=TE.keys_alias,h={control:0,shift:0,option:"alt",meta:0},f=(a.match(/(?:^|\n)([\t ]*).*$/)||[""]).pop();for(B in h)e.TE[B]()&&(j[h[B]||B]=1);W=e.TE.key(),j[W]=1,t=je(j),v(function(){c.record()});for(B in u){$=g(B),N=0;for(K in $)K=$[K],j[l[K]||K]&&++N;if($=Re($),N===$&&t===$&&(Y(u[B])&&(u[B]=Tt.tools[u[B]].click),q=k(u[B])&&u[B](e,c),q===!1))return Ke(e)}if(be)for(B in be)if(F=be[B],F!==!1){if(W===F&&o===F)return"\\"===s?(c.insert(W,0),Ke(e)):(c.select(n.end+1),Ke(e));if(B===W)return c.wrap(B,F),Ke(e);if(s===B&&o===F){if("backspace"===W&&a.slice(-2)!=="\\"+B)return c.unwrap(B,F),Ke(e);if(ye&&"enter"===W&&B!==F&&!r)return c.tidy("\n"+f+me,"\n"+f).scroll(1),Ke(e)}}if(ye&&!r){if("backspace"===W&&p(d(me)+"$").test(a))return c.outdent(me),Ke(e);if("enter"===W&&p("(^|\\n)("+d(me)+")+.*$").test(a))return c.insert("\n"+f,0,1).scroll(1),Ke(e)}}function fn(e){e&&e.TE&&e.TE.key?delete j[e.TE.key()]:j={}}function vn(e){return dn=Gt,_=et(Ht),Ke(e)}function An(e){dn===Gt&&h(Bt,{height:Qe(Dt,e).y-_.h+Ye})}function On(){dn=0}function bn(){Tt.exit(1)}function yn(){t=et(Ft),ae=t.w,P=t.h,t=et(qt),gn=t.w,pn=t.h}function Un(e,t){return t&&Ne("exit.modal."+t,[c]),Fe(ue,qt,[e]),Ke(e)}function mn(e){dn=e.target,t=Qe(Ft,e),ie=t.x,se=t.y,yn()}function kn(e){var n=En.header,a=En.sizer;dn===n||tt(dn,n)===n?(t=Qe(Dt,e),q=t.x-ie,ee=t.y-se,h(Ft,{left:(ae>gn?q:f(q,0,gn-ae))+Ye,top:(P>pn?ee:f(ee,0,pn-P))+Ye})):dn===a&&(t=Qe(Ft,e),_=et(a),h(Ft,{width:t.x+_.w/4+Ye,height:t.y+_.h/4+Ye}))}function xn(){dn=0}function In(e,t,n){return{header:e,body:t,footer:n}}function wn(e){Z=Tt.drop.target,G=Wt,N=e&&e.target||0,(!N||N!==Z&&tt(N,Z)!==Z)&&(Tt.drop.target=0,Tt.exit(N===Bt))}var Z,G,N,D,P,B,K,$,q,F,W,t,X,Q,_,ee,te,ne,ae,ie,se,n="⌘",a="…",s="⇥",o="⇧",r=window,u=document,c=new TE(e),l=c._,h=l.css,f=l.edge,d=l.x,g=l.extend,p=l.pattern,E=l.timer.reset,v=l.timer.set,A=l.trim,O={},b=function(){},y=TE.is,U=y.e,m=y.a,k=y.f,x=y.i,I=y.o,w=y.r,C=function(e){return!y.x(e)},Y=y.s,T=u.documentElement,S=(u.head,u.body),R=(u.currentScript,g({tab:"  ",direction:"ltr",path:TE.path,resize:1,keys:1,tools:"indent outdent | undo redo",attributes:{spellcheck:"false"},union:[[["\\u003C","\\u003E","\\u002F"],["\\u003D","\\u0022","\\u0022","\\u0020"]],[["<",">","/"],["=",'"','"'," "]]],auto_tab:1,auto_close:{'"':'"',"'":"'","(":")","{":"}","[":"]","<":">"},languages:{tools:{tools:["Focus Tools","F10"],undo:["Undo",n+"+Z"],redo:["Redo",n+"+Y"],indent:["Indent",s],outdent:["Outdent",o+"+"+s]},buttons:{okay:"OK",cancel:"Cancel",yes:"Yes",no:"No",enter:"Enter",exit:"Exit",open:"Open",close:"Close",ignore:"Ignore"},placeholders:{"":"text here"+a},labels:{},others:{}},classes:{"":"text-editor",i:"text-editor-i text-editor-i-%1 text-editor-i-%1--%2 fa fa-%2"}},t)),j={},re="blur",ue="click",de="keydown",ge="keyup",pe="touchstart mousedown",Ee="touchmove mousemove",ve="touchend mouseup",Oe="orientationchange resize",be=R.auto_close,ye=R.auto_tab,Ue=R.languages,me=R.tab,xe=(R.union[1][1],R.union[1][0]),Ie=R.union[0][1],we=R.union[0][0],Ce="javascript:;",Ye="px",Tt=c.ui={};c.tidy=function(e,t){var n=c.$(),a=A(n.before)?e:"",i=A(n.after)?C(t)?t:e:"";return c.trim(a,i)},c.i=function(){return A(c.replace(/\s+/g," "))},c.format=function(e,t,n,a){I(e)||(e=[e]),C(n)||(n=" "),C(a)||(a="");var i=c.h,s=c[0]().$(),o=e[0].split(p("("+Ie[3]+")+"))[0],r=(e[0]?xe[0]+e[0]+xe[1]:"")+a,u=a+(e[0]?xe[0]+xe[2]+(e[1]||o)+xe[1]:""),l=d(e[0]?xe[0]+o+xe[1]:""),h=d(u),f=p("^"+l+"([\\s\\S]*?)"+h+"$"),g=p(l+"$"),E=p("^"+h),v=s.before,A=s.after;return s.length?n=!1:c.insert(Ue.placeholders[""]),c.toggle(t?!f.test(s.value):!g.test(v)&&!E.test(A),[function(e){e.unwrap(r,u,1).tidy(p(we[0]+"[^"+we[0]+we[1]+we[2]+"]+?"+we[1]+"$").test(v)?"":n,p("^"+we[0]+we[2]+"[^"+we[0]+we[1]+"]+?"+we[1]).test(A)?"":n).wrap(r,u,t)},function(e){e.unwrap(r,u,t)}])[i]()};var tn,zt=R.classes,St=zt[""],Lt=Ue.tools,Rt=Ue.buttons,jt=Ue.labels,Zt=St+"-textarea "+St+"-content block",Gt=Yt(St+"-sizer s"),Nt=Yt(St+"-sizer se"),Mt=Yt(St),Jt=Yt(St+"-header"),Dt=Yt(St+"-body"),Ht=Yt(St+"-footer"),Pt=Yt(St+"-tool"),Bt=ot(e,!1,R.attributes),Kt=Yt(St+"-description"),$t=ot(),qt=ot(),Ft=ot(),Wt=ot(),Xt=ot(),Vt=ot(),Qt=Yt("left","span"),_t=Yt("right","span"),en=0;Tt.i=function(e,t,n){return e=Ve(e).replace(/[\/\s]/g,"-"),_=Xe(zt.i,[e,t||e]),n?(it(n),nt(n,_),n):'<i class="'+_+'"></i>'},C(R.suffix)||(R.suffix=xe[1]);var un="ui-drop-data",dn=0,ie=0,se=0,ae=0,P=0,gn=0,pn=0,En={};c.create=function(e,t){if(c.is.create)return c;c.is.create=!0,I(e)&&(R=g(R,e));var n=Ot(Bt);return nt(Mt,St+"-is-can-update"),nt(Mt,St+"-is-can-copy"),nt(Bt,Zt),n&&vt(n,"p")?(bt(n,Mt),en=n,xt(n,!1)):bt(Bt,Mt),Mt.dir=R.direction,kt(Mt,Jt),kt(Mt,Dt),kt(Mt,Ht),kt(Dt,Bt),R.tools&&(kt(Jt,Pt),kt(Ht,Kt),kt(Kt,Qt),kt(Kt,_t)),$e(de,Bt,hn),$e(ge+" "+re,Bt,fn),R.resize&&(kt(Mt,Gt),nt(Mt,St+"-is-can-resize"),$e(pe,Gt,vn),$e(Ee,u,An),$e(ve,S,On)),cn(),ln(),0!==t?Ne("create",[c]):c},c.update=function(e,t){return c.is.create&&c.destroy(0),(0!==t?Ne("update",[c]):c).create(e,0)},c.destroy=function(e){return c.is.create?(c.is.create=!1,Tt.exit(0,0,0),it(Bt,Zt),R.tools=ze(R.tools),R.keys&&(qe(de,Bt,hn),qe(ge,Bt,fn)),R.resize&&(qe(pe,Gt,vn),qe(Ee,u,An),qe(ve,u,On)),en?(bt(Mt,en),kt(en,Bt),en=0):bt(Mt,Bt),Ct(Mt),0!==e?Ne("destroy",[c]):c):c},c.enable=function(e){return Bt.disabled=Bt.readOnly=!1,nt(Mt,St+"-is-can-update"),nt(Mt,St+"-is-can-copy"),0!==e?Ne("enable",[c]):c},c.disable=function(e){return Bt.disabled=!0,it(Mt,St+"-is-can-update"),it(Mt,St+"-is-can-copy"),0!==e?Ne("disable",[c]):c},c.freeze=function(e){return Bt.disabled=!1,Bt.readOnly=!0,it(Mt,St+"-is-can-update"),nt(Mt,St+"-is-can-copy"),0!==e?Ne("freeze",[c]):c},Tt.exit=function(e,t,n){if(D={panel:function(){Ct($t)},overlay:function(){qe(ue,qt,bn),Ct(qt)},modal:function(){qe(ue+" "+de,En.x,Un),qe(pe,Dt,mn),qe(Ee,Dt,kn),qe(ve,u,xn),Ct(Ft)},drop:function(){qe(ue,u,wn),qe(Oe,r,wn),Ct(Wt)},bubble:function(){Ct(Xt)}},fn(),t)if(I(t))for(B in t)B=t[B],D[B]&&D[B](),0!==n&&Ne("exit."+B,[c]);else D[t]&&D[t](),0!==n&&Ne("exit."+B,[c]);else for(B in D)D[B]();return e&&c.select(),0!==n&&Ne("exit",[c]),c},Tt.panel=function(e,t,n,a){function i(e){return qe(ue+" "+de,ie,i),Tt.panel.exit(1),Ke(e)}return Tt.exit(0,0,0),q=Ve(e),ee=0,a&&(q+=" "+q+"--"+Ve(a)),I(t)&&!U(t)&&(ee=Yt(St+"-panel-header "+q,0,t.header),t=t.body),te=Yt(St+"-panel-body "+q,0,Yt(St+"-panel-content "+q,0,k(t)?"":t)),k(t)&&t(te),ie=ot("a",!1,{href:Ce,"class":St+"-a "+St+"-x "+q}),ie.title=Rt.close,ot($t,!1,{"class":St+"-panel "+q}),$e(ue+" "+de,ie,i),lt($t,0),ee&&kt($t,ee),kt(Dt,ot($t,[te,ie])),k(n)?n($t):Y(n)&&ot($t,n),Z=[c,$t],a&&Ne("enter.panel."+e+":"+a,Z),Ne("enter.panel."+e,Z),Ne("enter.panel",Z),Ne("enter",Z),ie.focus(),c},Tt.panel.fit=function(){},Tt.overlay=function(e,t,n,a){return Tt.exit(0,0,0),q=Ve(e),a&&(q+=" "+q+"--"+Ve(a)),kt(Dt,ot(qt,!1,{"class":St+"-overlay "+q})),t&&$e(ue,qt,bn),k(n)?n(qt):Y(n)&&ot(qt,n),Z=[c,qt],a&&Ne("enter.overlay."+e+":"+a,Z),Ne("enter.overlay."+e,Z),Ne("enter.overlay",Z),Ne("enter",Z),c},Tt.overlay.fit=function(){},Tt.message=function(e,t,n,a,i){function o(e){return qe(ue+" "+de,ie,o),E(s),Tt.overlay.exit(1),Ke(e)}var s;return q=Ve(e),i&&(q+=" "+q+"--"+Ve(i)),ie=ot("a",!1,{href:Ce,"class":St+"-a "+St+"-x "+q}),ie.title=Rt.close,ot(Vt,k(t)?t(Vt):t,{"class":St+"-message "+q}),$e(ue+" "+de,ie,o),Tt.overlay("message message-"+q,0,function(e){kt(Vt,ie),n&&(s=v(function(){o()},n)),kt(e,Vt)},i),k(a)?a(Vt):Y(a)&&ot(Vt,a),c},Tt.modal=function(){var r,l,e=arguments,t=e[0],n=e[1],a=e[2],i=e[3],s=St+"-modal",o=n.footer;if(I(t)&&(t="default",n=e[0],a=e[1],i=e[2]),Tt.overlay(t,1,0,i).blur(),q=Ve(t),i&&(q+=" "+q+"--"+Ve(i)),ot(Ft,!1,{"class":s+" "+q}),C(n.body)&&(n.body=ot("div",n.body,{"class":s+"-content "+q})),C(o)&&I(o)&&!U(o)){l=[];for(B in o)K=o[B],U(K)?l.push(K):(K=sn(K,B,o),$=B.text||Rt[B]||B,r=ot("button",$,g({name:"y["+B+"]",type:"button","class":St+"-button",data:{"button-id":B}},K.attributes)),$e(ue,r,function(e){return $=o[Pe(this,"button-id")].click(e,c),$===!1?Ke(e):void 0}),l.push(r));n.footer=l}for(B in n)s[1]=B,En[B]=Yt(s+"-"+Xe(B,s)+" "+q,0,n[B]);return En.x=ot("a",!1,{href:Ce,"class":St+"-a "+St+"-x "+q}),En.sizer=Nt,lt(Ft,0),En.x.title=Rt.close,kt(Dt,ot(Ft,En,{style:""})),Tt.modal.fit(),yt(Ft,qt),$e(ue+" "+de,En.x,Un),$e(pe,En.header,Ke),$e(pe,En.sizer,Ke),$e(pe,Dt,mn),$e(Ee,Dt,kn),$e(ve,u,xn),k(a)&&a(En),Z=[c,Ft,En],i&&Ne("enter.modal."+t+":"+i,Z),Ne("enter.modal."+t,Z),Ne("enter.modal",Z),Ne("enter",Z),En.x.focus(),c},Tt.modal.fit=function(e){return yn(),q=gn/2-ae/2,ee=pn/2-P/2,I(e)?(C(e[0])&&(q=e[0]),C(e[1])&&(ee=e[1])):(q=f(q,0),ee=f(ee,0)),h(Ft,{left:q+Ye,top:ee+Ye,"min-width":ae+Ye,"min-height":P+Ye,visibility:"visible"}),Z=[c,Ft,En],Ne("fit.modal",Z),Ne("fit",Z),c};var Cn={"class":St+"-button",name:"y"};return Tt.alert=function(e,t,n,a,i){var s=ot("button",Rt.okay,Cn),o="alert";return n=n||b,I(e)&&(o+=":"+e[0],e=e[1]||e[0]),$e(ue,s,function(e){return n(e,c),Un(e,o+".y")}),$e(de,s,function(e){var t=e.TE.key;return t(/^(escape|enter)$/)&&Fe(ue,s,[e]),Ke(e)}),Tt.modal(o,In(e,t,s),a,i),s.focus(),c},Tt.confirm=function(e,t,n,a,i,s){function h(e){return k(n)&&n(e,c),Un(e,u+".y")}function f(e){return k(a)&&a(e,c),Un(e,u+".n")}var l,o=ot("button",Rt.okay,Cn),r=ot("button",Rt.cancel,Cn),u="confirm";return r.name="n",$e(ue,o,h),$e(ue,r,f),$e(de,o,function(e){return l=e.TE.key,l("arrowright")?r.focus():l("enter")?h(e):l("escape")&&Un(e,u+".y"),Ke(e)}),$e(de,r,function(e){return l=e.TE.key,l("arrowleft")?o.focus():l("enter")?f(e):l("escape")&&Un(e,u+".n"),Ke(e)}),Tt.modal(u,In(e,t,[o,r]),i,s),r.focus(),c},Tt.prompt=function(e,t,n,a,i,s,o){function E(){l.focus(),"placeholder"in l&&l.select()}function v(e){return d=l.value,k(n)&&!n(d)?E():!n||A(d)&&d!==t?(Un(e,h+".y"),a(e,c,d!==t?d:"",t)):E(),Ke(e)}function O(e){return Un(e,h+".n")}var d,g,p,r=ot("button",Rt.okay,Cn),u=ot("button",Rt.cancel,Cn),l=ot("input",!1,{type:"text",value:t,placeholder:t,spellcheck:"false","class":St+"-input block"}),h="prompt",f=[];if(i=i||0,1===i)l=ot("textarea",t,{placeholder:t.split("\n")[0],"class":St+"-textarea block",spellcheck:"false"});else if(2===i){for(B in t)f.push(ot("option",t[B],{value:B,selected:B===n||null}));l=ot("select",f,{"class":St+"-select block"})}return a=a||b,l.name="data",u.name="n",$e(de,l,function(e){return g=e.TE.key,p=e.TE.control,g("enter")&&0===i||p("enter")?v(e):g("escape")||g("backspace")&&!this.value?O(e):g("arrowdown")&&0===i||g("enter")&&2===i||p("arrowdown")?(r.focus(),Ke(e)):void 0}),$e(de,r,function(e){return g=e.TE.key,g("enter")?v(e):g("escape")?O(e):g("arrowup")?l.focus():g("arrowright")&&u.focus(),Ke(e)}),$e(de,u,function(e){return g=e.TE.key,g(/^(enter|escape)$/)?O(e):g("arrowup")?l.focus():g("arrowleft")&&r.focus(),Ke(e)}),$e(ue,r,v),$e(ue,u,O),Tt.modal(h,In(e,l,[r,u]),s,o),E(),c},Tt.drop=function(){Tt.exit(0,0,0);var e=arguments,t=e[0],n=e[1],a=e[2];return 1===Re(e)&&(t="default",n=e[0],a=e[1]),q=Ve(t),lt(Wt,0),kt(S,ot(Wt,!1,{"class":St+"-drop "+q})),k(n)?n(Wt):ot(Wt,n),Tt.drop.fit(),a===!1||($e(ue,u,wn),$e(Oe,r,wn)),Z=[c,Wt],Ne("enter.drop."+t,Z),Ne("enter.drop",Z),c},Tt.drop.fit=function(e){return Z=et(T),G=et(Wt),N=Tt.drop.target,q=Z.w/2-G.w/2,ee=Z.h/2-G.h/2,!C(e)&&N&&(t=_e(N),q=t.l,ee=t.t+et(N).h),I(e)?(C(e[0])&&(q=e[0]),C(e[1])&&(ee=e[1])):(q=f(q,0,Z.w-G.w),ee=f(ee,0,Math.max(Z.h,et(r).h)-G.h)),h(Wt,{left:q+Ye,top:ee+Ye,visibility:"visible"}),Z=[c,Wt],Ne("fit.drop",Z),Ne("fit",Z),c},Tt.menu=function(e,n,a,i){var r,s=Tt.tools,o=0;if(n===!1)return Tt.tool(e,n);for(i in a)ae="%"===i[0],r=a[i],r=Y(r)&&!ae?s[r]:r,r&&(r=sn(r,i,s),a[i]=r);return Tt.tool(e,{i:I(n)?n[0]:0,text:I(n)?n[1]||0:n&&a[n]&&a[n].text||n,click:function(u){var l=Tt.drop.target=s[e].target;return Tt.drop("menu menu-"+Ve(e),function(u){function h(o){return ee=this,t=Pe(ee,"tool-id"),F=a[t],F=Y(F)?s[F]:F||{},W=ct(ee),!an(F)&&k(i=F.click)&&(i=i(o,c),F.i&&(s[e].i=F.i),Tt.menu.set(e,I(F.text)?[F.text[0],t]:I(n)?[n[0],t]:t),i===!1)?(c.select(),Ke(o)):(c.select(),Ke(o))}function f(e){if(ee=this,($=e.TE.key)("escape"))Tt.exit(1);else if($("enter"))Fe(ue,ee,[e]);else if($("f10")&&l)l.focus();else if($("arrowdown")&&(q=gt(ee))){for(;!vt(q,"a")&&q;)q=gt(q);q&&q.focus()}else if($("arrowup")&&(q=pt(ee))){for(;!vt(q,"a")&&q;)q=pt(q);!q&&l?(Tt.exit(),l.focus()):q&&q.focus()}else $("arrowup")&&l&&(Tt.exit(),l.focus());return Ke(e)}for(i in a)if(r=a[i],ae="%"===i[0],r){var d={href:ae?null:Ce,"class":St+"-"+(ae?"label":"button")};ae?K=jt[e]&&jt[e][+i.slice(1)-1]||i:(d.data={},d.data["tool-id"]=i,K=Lt[i]||i),Q=r.text,Q=I(Q)?Q[1]||"":Q,K=I(K)?K[0]:K,_=ot(ae?"span":"a","<span>"+(ae?K||"%"+o:Q||K)+"</span>",g(d,r.attributes||{})),nt(_,"menu-"+Ve(i).replace(/[\/\s]/g,"-")),!d.title&&(ee=r.title)&&(_.title=I(ee)?ee[0]+(ee[1]?" ("+ee[1]+")":""):ee),ae?Me(_,{id:St+"-label:"+o}):(an(r)?nt(_,"x"):it(_,"x"),r.on?nt(_,"on"):it(_,"on"),$e(ue,_,h),$e(de,_,f)),kt(u,_),++o}v(function(){(At('[data-tool-id="'+Pe(l,un)+'"]',u)[0]||At("a",u)[0]).focus()},1)}),!1}},i),He(s[e].target,{"ui-drop":e}),s[e].data=a,Tt.menu.set(e,n)},Tt.menu.set=function(e,t){var s,o,n=Tt.tools[e]||{},a=n.target,i=n.data;return a?(I(t)?He(a,un,t[1]||""):(He(a,un,t),t=i[t]&&i[t].text||t),I(t)?(o=t[0],o=Se(o,"<")?o:Tt.i(o,n.i),t=C(t[1])?t[1]:0,t=t&&i[t]&&i[t].text||t,t=o+(0!==t?"<span>"+(I(t)?t[1]||t:t)+"</span>":"")):o=Tt.i(e,n.i),(s=At("."+St+"-text",a)[0])?(nt(a,"text"),ut(s,t)):(it(a,"text"),ut(a,o)),c):c},Tt.bubble=function(){Tt.exit(0,0,0);var e=arguments,t=e[0],n=e[1];return 1===Re(e)&&(t="default",n=e[0]),q=Ve(t),lt(Xt,0),kt(S,ot(Xt,!1,{"class":St+"-bubble "+q})),k(n)?n(Xt):ot(Xt,n),Tt.bubble.fit(),Z=[c,Xt],Ne("enter.bubble."+t,Z),Ne("enter.bubble",Z),c},Tt.bubble.fit=function(e){_=c.$(1),t=_e(Bt),P=h(Bt,"line-height");var n="border-",a="-width";q=_.caret[0].x+t.l-Bt.scrollLeft,ee=_.caret[1].y+t.t+P-Bt.scrollTop,G=h(Dt,[n+"top"+a,n+"bottom"+a,n+"left"+a,n+"right"+a]);var i=et(Dt),s=et(Xt),o=G[0]+G[1],r=G[2]+G[3];return I(e)?(C(e[0])&&(q=e[0]),C(e[1])&&(ee=e[1])):(q=f(q,t.l,t.l+i.w-s.w-r),ee=f(ee,t.t,t.t+i.h-s.h-o)),h(Xt,{left:q+Ye,top:ee+Ye,visibility:"visible"}),Z=[c,Xt],Ne("fit.bubble",Z),Ne("fit",Z),c},Tt.panel.exit=function(e){return Tt.exit(e,"panel")},Tt.overlay.exit=function(e){return Tt.exit(e,"overlay")},Tt.modal.exit=function(e){return Tt.exit(e,"modal")},Tt.drop.exit=function(e){return Tt.exit(e,"drop")},Tt.bubble.exit=function(e){return Tt.exit(e,"bubble")},Tt.tool=function(e,t,n){var a=Tt.tools;return K="",$=C(a[e])?"update":"create","|"!==e&&(R.tools=Te(R.tools).filter(function(t,n){return t===e?(K=n,!1):!0})),t===!1?(delete a[e],$="destroy"):("|"===e?(n=t,t={}):(k(t)&&(t={click:t}),a[e]=g(a[e]||{},t),C(n)||""===K||(n=K)),x(n)?R.tools.splice(n,0,e):R.tools.push(e)),Ne($+".tool."+e,[c,a[e]]),cn(),c},Tt.separator=function(e,t){return Tt.tool("|",e!==!1?{attributes:e||{}}:!1,t)},Tt.key=function(e,t){var n=Tt.keys;return $=C(n[e])?"update":"create",t===!1?(delete n[e],$="destroy"):n[e]=t,Ne($+".key."+e,[c,n[e]]),ln(),c},Tt.key.set=function(e){j[e]=1},Tt.key.reset=function(e){e?delete j[e]:j={}},Tt.tools={"|":{},undo:{i:"undo",click:function(e,t){return t.undo(),!1}},redo:{i:"repeat",click:function(e,t){return t.redo(),!1}},indent:function(e,t){return t.indent(me),!1},outdent:function(e,t){return t.outdent(me),!1}},Tt.keys={"control+y":"redo","control+z":"undo",escape:function(e,t){return Q=":not([tabindex]):not([disabled])",(_=At("input"+Q+",button"+Q+",select"+Q+",textarea"+Q+",a[href]"+Q+",[contenteditable]"+Q+',[tabindex]:not([tabindex="-1"])',u,0))&&-1!==(ee=_.indexOf(Bt))?((_[ee+1]||u).focus(),!1):void 0},f10:function(e,t){return At("a",Pt)[0].focus(),!1},tab:ye?"indent":0,"shift+tab":ye?"outdent":0},Tt.el={container:Mt,header:Jt,body:Dt,footer:Ht,panel:$t,overlay:qt,modal:Ft,drop:Wt,bubble:Xt},c.config=R,g(TE._,{time:function(e){var t=new Date(C(e)?e:Date.now()),n=t.getFullYear(),a=t.getMonth()+1,i=t.getDate(),s=t.getHours(),o=t.getMinutes(),r=t.getSeconds(),u=t.getMilliseconds();return 10>a&&(a="0"+a),10>i&&(i="0"+i),10>s&&(s="0"+s),10>o&&(o="0"+o),10>r&&(r="0"+r),10>u&&(u="0"+u),[""+n,""+a,""+i,""+s,""+o,""+r,""+u]},replace:We,format:Xe,dom:{set:kt,reset:xt,get:At,id:rt,copy:It,replace:wt,classes:{set:nt,reset:it,toggle:st,get:at},attributes:{set:Me,reset:De,get:Je},data:{set:He,reset:Be,get:Pe},is:vt,offset:_e,pointer:Qe,size:et,content:{set:ut,reset:lt,get:ct},closest:tt,parent:ht,children:ft,closest:dt,next:gt,previous:pt,index:Et,before:bt,after:yt,prepend:Ut,append:mt},el:ot,events:{set:$e,reset:qe,fire:Fe,x:Ke}}),g(c._,TE._),g(c._,{hooks:{set:Ze,reset:Ge,fire:Ne}}),c.create()};