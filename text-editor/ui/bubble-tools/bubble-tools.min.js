/*!
 * ==========================================================
 *  BUBBLE TOOLS PLUGIN FOR USER INTERFACE MODULE 1.0.0
 * ==========================================================
 * Author: Taufik Nurrohman <https://github.com/tovic>
 * License: MIT
 * ----------------------------------------------------------
 */
TE.each(function(e){function G(e,t,i){n.tools[e].click(null,i);for(w in t)(N=v("[name=data]",s)[0])&&(N.value=t[w],(S=v("[name=y]",s)[0])&&d.fire("click",S))}function H(t,i){R=g.copy(t.target),d.set("keydown",R,function(t){if(N=this,(S=t.TE.key)("arrowdown"))return d.x(t);if(S("arrowup"))return e.select(),d.x(t);if(S("arrowright")&&(F=E(N))){for(;!T(F,"a")&&F;)F=E(F);F.focus()}else if(S("arrowleft")&&(F=A(N))){for(;!T(F,"a")&&F;)F=A(F);F.focus()}}),d.set("click",R,function(t){return x=k(this,"tool-id"),r[x].click(t,e,x),(S=v("[name=data]",s)[0])&&n.bubble(a,function(t){p(t,{"font-size":"80%"}),F=f("input",!1,{type:"text",value:S.value,"class":o+"-input"}),d.set("keydown",F,function(t){return S=t.TE.key,C=this.value,S("escape")||S("backspace")&&!C?(n.bubble.exit(1),d.x(t)):S("enter")?(G(x,[C,"",""],e),d.x(t)):void 0}),y(t,F),$(function(){F.focus(),F.select()},1)}),d.x(t)}),y(i,R)}var O,I,R,x,w,N,S,C,F,n=e.ui,i=e.config,o=i.classes[""],r=n.tools,l=i.tools_alt||"b i a blockquote,q pre,code",a="tool "+o+"-tool",c=e.target,s=n.el.modal,u=e._,f=u.el,p=u.css,b=u.trim,d=u.event,h=u.hook,g=(u.edge,u.dom),k=g.data.get,v=g.get,E=g.next,A=g.previous,T=g.is,y=g.append,$=setTimeout;d.set("keydown",c,function(e){return S=e.TE.key,S("arrowup")?d.x(e):S("arrowdown")?(v("a",n.el.bubble)[0].focus(),d.x(e)):void 0}),d.set("copy cut focus input keyup mouseup paste scroll",c,function(t){S=e.$(),S.length?n.bubble(a,function(e){p(e,{padding:0,"font-size":"80%"}),O=b(l).split(/\s+/);for(N in O)(I=r[O[N]])&&H(I,e)}):n.bubble.exit()}),h.set("enter.bubble",function(){$(function(){n.bubble.fit()},1)})});