/*!
 * ==========================================================
 *  BUBBLE TOOLS PLUGIN FOR USER INTERFACE MODULE 0.0.9
 * ==========================================================
 * Author: Taufik Nurrohman <https://github.com/tovic>
 * License: MIT
 * ----------------------------------------------------------
 */
TE.each(function(e){var k,v,y,x,T,_,q,t=0,n=e.ui,r=e.config,o=n.tools,i=r.tools_alt||"b i a blockquote,q pre,code",l=r.classes[""],s=e.target,c=e._,f=(c.el,c.css),u=c.trim,p=c.event,d=c.hook,b=c.edge,h=c.dom,g=h.data.get,m=h.append;p.set("copy cut focus input keyup mouseup paste scroll",s,function(r){_=e.$(),_.length&&!t?n.bubble("tool "+l+"-tool",function(t){f(t,{padding:0,"font-size":"80%"}),k=u(i).split(/\s+/);for(T in k)(v=o[k[T]])&&(p.set("click",y=h.copy(v.target),function(t){return x=g(this,"tool-id"),o[x].click(t,e,x),_=e.$(1),q=[b(_.caret[0].x-s.scrollLeft,0),b(_.caret[1].y-s.scrollTop,0)],n.modal.fit(q),n.drop.fit(q),p.x(t)}),m(t,y))}):(n.bubble.exit(),t=0)}),d.set("enter.bubble",function(){setTimeout(function(){n.bubble.fit()},1)}),d.set("enter.modal",function(){t=1,q&&n.modal.fit(q)}),d.set("enter.drop",function(){q&&n.drop.fit(q)})});