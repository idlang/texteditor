/*!
 * ==========================================================
 *  BUBBLE TOOLS PLUGIN FOR USER INTERFACE MODULE 0.0.9
 * ==========================================================
 * Author: Taufik Nurrohman <https://github.com/tovic>
 * License: MIT
 * ----------------------------------------------------------
 */
TE.each(function(e){var w,T,_,q,E,z,C,H,t=0,n=e.ui,i=e.config,r=i.classes[""],o=n.tools,l=i.tools_alt||"b i a blockquote,q pre,code",a="tool "+r+"-tool",s=e.target,c=n.el.modal,u=e._,f=u.el,p=u.css,b=u.trim,d=u.event,h=u.hook,m=u.edge,g=u.dom,k=g.data.get,v=g.get,$=g.append,y=setTimeout;d.set("copy cut focus input keyup mouseup paste scroll",s,function(i){z=e.$(),z.length&&!t?n.bubble(a,function(t){p(t,{padding:0,"font-size":"80%"}),w=b(l).split(/\s+/);for(E in w)(T=o[w[E]])&&(d.set("click",_=g.copy(T.target),function(t){return q=k(this,"tool-id"),o[q].click(t,e,q),/^(a|img|table)$/.test(q)&&(z=v("[name=data]",c)[0])&&n.bubble(a,function(e){p(e,{"font-size":"80%"}),H=f("input",!1,{type:"text",value:z.value,"class":r+"-input"}),d.set("keydown",H,function(e){return z=e.TE.key,C=this.value,z("escape")||z("backspace")&&!C?(n.bubble.exit(1),d.x(e)):void z("enter")}),$(e,H),y(function(){H.focus(),H.select()},1)}),z=e.$(1),C=[m(z.caret[0].x-s.scrollLeft,0),m(z.caret[1].y-s.scrollTop,0)],n.modal.fit(C),n.drop.fit(C),d.x(t)}),$(t,_))}):(n.bubble.exit(),t=0)}),h.set("enter.bubble",function(){y(function(){n.bubble.fit()},1)})});