TE.each(function(e){function H(e,t,n){n=n||0;var i=e.slice(n).search(t);return i>=0?i+n:i}function j(){C=O.value,M=f.modals.find_alert,_=e.get(),s=1===r?_.indexOf(C,o):2===r?H(_,w(C),o):3===r?H(_,w(C,"i"),o):_.toLowerCase().indexOf(C.toLowerCase(),o),-1===s?n.alert(M[0],k(M[1],[C]),A):(2!==r&&3!==r&&(C=y(C)),_=(_.slice(s).match(w("^"+C,0===r||2===r?"i":""))||[""])[0].length,o=s+_,e.select(s,s+_),l.scrollTop=e.$(1).caret[0].y)}function B(){s=O.value,e.select(!0).replace(w(0!==r&&1!==r?s:y(s),"g"+(1!==r&&3!==r?"i":"")),F.value)}function Y(e){M=f.modals.find,n.prompt(M[0],M[1],""+r,function(e,t,n){A(),c(D,M[1][r=+n])},2)}function I(e){return L=e.TE.key,L("alt")?(Y(),m(e)):L(/^(arrowdown|enter)$/)?(j(),m(e)):void 0}function A(){o=0,s=e.blur().$(),!d(S)[0]&&(s=s.value)&&(O.value=s),b(n.el.header,S),E(function(){O.focus(),O.select()}),v("keydown",l,I)}function P(){n.key.set("control"),p(S,!1),e.select(),g("keydown",l,I)}var L,s,C,M,_,t=Date.now(),n=e.ui,i=e.config,r=0,o=0,f=i.languages,s=i.classes[""],l=e.target,a=e._,u=a.dom,c=u.content.set,d=u.get,p=u.reset,b=u.set,h=a.el,y=a.x,g=a.event.reset,v=a.event.set,m=a.event.x,x=a.extend,k=a.format,w=a.pattern,E=a.timer.set,T="-find-replace",$=s+T+"--"+t;x(f,{tools:{find:["Find and Replace","⌘+F"]},modals:{find:["Mode",["Ignore Case","Match Case","Match Pattern","Match Case and Pattern"]],find_alert:["Not Found","Can’t find “%1”. Find again from top?"]},placeholders:{find:["find…","replace with…"]},labels:{find:["Find","Replace"]}}),M=f.placeholders.find;var O=h("input",!1,{type:"text","class":s+"-input "+s+"-input-find",id:s+"-find:"+t,title:M[0]}),F=h("input",!1,{type:"text","class":s+"-input "+s+"-input-replace",id:s+"-replace:"+t,title:M[1]}),N=h("a",n.i("config","cogs"),{href:"javascript:;","class":s+"-a",title:f.modals.find[0],style:"padding:0 .25em 0 .5em;"}),D=h("span",f.modals.find[1][0],{"class":s+"-label"});N.firstChild.style.backgroundSize="100% auto",M=f.labels.find;var S=h("div",[h("label",M[0],{"class":s+"-label "+s+"-label-find","for":s+"-find:"+t,style:"padding:0 .5em;"}),O,h("label",M[1],{"class":s+"-label "+s+"-label-replace","for":s+"-replace:"+t,style:"padding:0 .5em;"}),F,N,D],{"class":s+T+" "+$,id:s+T+":"+t,style:"font-size:80%;line-height:1.25em;padding:.25em;border-top:1px solid;border-top-color:inherit;"});v("click",l,P),v("keydown",O,function(e){return L=e.TE.key,C=this.value,e.TE.control("f")||L("backspace")&&!C?(C?A():P(),m(e)):L("alt")?(Y(),m(e)):L("tab")?(F.value=O.value,F.focus(),F.select(),m(e)):L("enter")&&C?(j(),m(e)):void 0}),v("keydown",F,function(e){return L=e.TE.key,C=this.value,e.TE.control("f")?(C?A():P(),m(e)):L("backspace")&&!C?(O.focus(),m(e)):L("alt")?(Y(),m(e)):L("tab")?(N.focus(),m(e)):L("enter")?(B(),m(e)):void 0}),v("click",N,Y),v("click",D,Y),n.tool("find",{i:"binoculars",click:function(e,t){return d(S)[0]?P():A(),!1}}),n.key("control+f","find")});