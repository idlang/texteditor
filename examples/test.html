<!DOCTYPE html>
<html dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">
    <title>Test</title>
    <link href="test.css" rel="stylesheet">
    <style>textarea {height:100px}</style>
    <script src="../editor.js"></script>
  </head>
  <body spellcheck="false">

    <h1>Test page for all methods that available in my selection library.</h1>

    <fieldset>
      <legend>Keyboard Event</legend>
      <textarea id="test-1-input"></textarea>
      <p id="test-1-output"></p>
      <script>
      (function() {
          var input = document.getElementById('test-1-input');
          var output = document.getElementById('test-1-output');
          var editor = new Editor(input);
          var presses = [];
          input.onkeydown = function(e) {
              presses.push(editor.key(e));
              output.innerHTML = '<span class="k">' + presses.join('</span> <span class="k">') + '</span>';
              return false;
          };
          // reset preview on `blur` event
          input.onblur = function() {
              presses = [];
              output.innerHTML = "";
          };
      })();
      </script>
    </fieldset>

    <fieldset>
      <legend>Selection</legend>
      <textarea id="test-2-input">Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat.</textarea>
      <p id="test-2-output"></p>
      <p><button id="test-2-button">Get Selection Data</button></p>
      <script>
      (function() {
          var input = document.getElementById('test-2-input');
          var output = document.getElementById('test-2-output');
          var button = document.getElementById('test-2-button');
          var editor = new Editor(input);
          button.onclick = function() {
              var s = editor.selection();
              output.innerHTML = '<b>Before:</b> ' + JSON.stringify(s.before) + '<br><b>Value:</b> ' + JSON.stringify(s.value) + '<br><b>After:</b> ' + JSON.stringify(s.after) + '<br><b>Start:</b> ' + s.start + '<br><b>End:</b> ' + s.end;
          };
      })();
      </script>
    </fieldset>

    <fieldset>
      <legend>Dynamic Selection</legend>
      <textarea id="test-3-input">Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat.</textarea>
      <p id="test-3-buttons">
        <button data-start="14" data-end="50">14 &ndash; 50</button>
        <button data-start="0" data-end="12">0 &ndash; 12</button>
        <button data-start="20" data-end="20">20</button>
      </p>
      <script>
      (function() {
          var input = document.getElementById('test-3-input');
          var buttons = document.getElementById('test-3-buttons').children;
          var editor = new Editor(input);
          for (var i = 0, len = buttons.length; i < len; ++i) {
              buttons[i].onclick = function() {
                  editor.select(this.getAttribute('data-start'), this.getAttribute('data-end'));
              };
          }
      })();
      </script>
    </fieldset>

    <fieldset>
      <legend>Replace Selection</legend>
      <textarea id="test-4-input">Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat.</textarea>
      <p><button id="test-4-button">Replace &ldquo;o&rdquo; in selection with &ldquo;&deg;&rdquo;</button></p>
      <script>
      (function() {
          var input = document.getElementById('test-4-input');
          var button = document.getElementById('test-4-button');
          var editor = new Editor(input);
          button.onclick = function() {
              editor.replace(/o/g, '\u00B0');
          };
      })();
      </script>
    </fieldset>

    <fieldset>
      <legend>Insert at Selection</legend>
      <textarea id="test-5-input">Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat.</textarea>
      <p><button id="test-5-button">:)</button></p>
      <script>
      (function() {
          var input = document.getElementById('test-5-input');
          var button = document.getElementById('test-5-button');
          var editor = new Editor(input);
          button.onclick = function() {
              editor.insert(':)');
          };
      })();
      </script>
    </fieldset>

    <fieldset>
      <legend>Wrap</legend>
      <textarea id="test-6-input">Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat.</textarea>
      <p id="test-6-buttons">
        <button data-tag="b"><b>B</b></button>
        <button data-tag="i"><i>I</i></button>
        <button data-tag="u"><u>U</u></button>
      </p>
      <label><input type="checkbox" id="test-6-toggle"> Wrap All</label>
      <script>
      (function() {
          var input = document.getElementById('test-6-input');
          var buttons = document.getElementById('test-6-buttons').children;
          var toggle = document.getElementById('test-6-toggle');
          var editor = new Editor(input);
          for (var i = 0, len = buttons.length; i < len; ++i) {
              buttons[i].onclick = function() {
                  var tag = this.getAttribute('data-tag');
                  editor.wrap('<' + tag + '>', '</' + tag + '>', null, toggle.checked);
              };
          }
      })();
      </script>
    </fieldset>

    <fieldset>
      <legend>Indent and Outdent</legend>
      <textarea id="test-7-input">test 1
test 2
test 3
test 4</textarea>
      <p id="test-7-buttons">
        <button>Indent</button>
        <button>Outdent</button>
      </p>
      <script>
      (function() {
          var input = document.getElementById('test-7-input');
          var buttons = document.getElementById('test-7-buttons').children;
          var editor = new Editor(input);
          buttons[0].onclick = function() {
              editor.indent('    ');
          };
          buttons[1].onclick = function() {
              editor.outdent('    ');
          };
      })();
      </script>
    </fieldset>

    <fieldset>
      <legend>Undo and Redo</legend>
      <textarea id="test-8-input">test 1
test 2
test 3
test 4</textarea>
      <p id="test-8-buttons">
        <button>Undo</button>
        <button>Redo</button>
      </p>
      <script>
      (function() {
          var input = document.getElementById('test-8-input');
          var buttons = document.getElementById('test-8-buttons').children;
          var editor = new Editor(input);
          input.onkeyup = function(e) {
              if (!e.ctrlKey && !e.shiftKey && !e.altKey) {
                  editor.updateHistory();
              }
          };
          buttons[0].onclick = function() {
              editor.undo();
          };
          buttons[1].onclick = function() {
              editor.redo();
          };
      })();
      </script>
    </fieldset>

  </body>
</html>