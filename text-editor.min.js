/*!
 * ==========================================================
 *  TEXT EDITOR PLUGIN 1.1.1
 * ==========================================================
 * Author: Taufik Nurrohman <http://latitudu.com>
 * License: MIT
 * ----------------------------------------------------------
 */
var TE=function(e){function t(){return e.value}function r(e){return void 0!==e}function n(e){return"string"==typeof e}function o(e){return"function"==typeof e}function c(e){return"object"==typeof e}function u(e){return e instanceof RegExp&&e.source?e.source:!1}function a(e){return u(e)||i.esc(e)}function s(e,t,r){return t>e?t:e>r?r:e}function l(e,t){return RegExp(e,t)}var f=document,i=this,g=1,p=0,d=[[t(),0,0]],h=0,v={};return i.x="!$^*()-=+[]{}\\|:<>,./?",i.version="1.1.1",e.TE=i,i.keys={8:"backspace",9:"tab",13:"enter",16:"shift",17:"control",18:"alt",19:"pause",20:"capslock",27:"escape",33:"pageup",34:"pagedown",37:"arrowleft",38:"arrowup",39:"arrowright",40:"arrowdown",44:"printscreen",45:"insert",46:"delete",91:"os",93:"contextmenu",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",32:" ",59:[";",":"],61:["=","+"],173:["-","_"],188:[",","<"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']},i.keys_a={alternate:"alt",option:"alt",ctrl:"control",cmd:"control",command:"control",meta:"control",context:"contextmenu","return":"enter",ins:"insert",del:"delete",esc:"escape",home:"pageup",end:"pagedown",left:"arrowleft",up:"arrowup",right:"arrowright",down:"arrowdown",space:" "},Object.defineProperty(KeyboardEvent.prototype,"TE",{configurable:!0,get:function(){function e(e,t){return t&&(!r(e)||n(e)&&(i.keys_a[e]||e)===o||e===!0)}var t=this,o=t.key||i.keys[t.which||t.keyCode];return c(o)&&(o=t.shiftKey?o[1]||o[0]:o[0]),o=o.toLowerCase(),{key:function(e){return r(e)?u(e)?e.test(o):(e=e.toLowerCase(),(i.keys_a[e]||e)===o):o},control:function(r){return e(r,t.ctrlKey)},shift:function(r){return e(r,t.shiftKey)},option:function(r){return e(r,t.altKey)},meta:function(r){return e(r,t.metaKey)}}}}),i.set=function(t){return e.value=t,i},i.get=function(e){return r(e)?t().length?t():e:t()},i.save=function(e,t){return v[e]=t,i},i.restore=function(e,t){return r(e)?r(v[e])?v[e]:r(t)?t:!1:v},i.focus=function(n,o){return n===!0?(n=t().length,o=e.scrollHeight):n===!1&&(n=o=0),r(n)&&(e.selectionStart=e.selectionEnd=n,e.scrollTop=o),e.focus(),i},i.blur=function(){return e.blur(),i},i.$=function(){var r=t().replace(/\r/g,""),n=e.selectionStart,o=e.selectionEnd,c=r.substring(n,o);return{start:n,end:o,value:c,before:r.substring(0,n),after:r.substring(o),length:c.length}},i.select=function(){var t,r=arguments,n=r.length,o=f.documentElement,c=f.body,u=e,a="scrollTop",s=i.$(),l="TE.scroll";if(i.save(l,[o[a],c[a],u[a]]).focus(),0===n)r[0]=s.start,r[1]=s.end;else if(1===n){if(r[0]===!0)return u.select(),i;r[1]=r[0]}return e.setSelectionRange(r[0],r[1]),t=i.restore(l,[0,0,0]),o[a]=t[0],c[a]=t[1],u[a]=t[2],i},i.match=function(e,t){var r=i.$().value.match(e);return o(t)?t(r||[]):!!r},i.replace=function(e,t){var r=i.$(),n=r.start,o=(r.end,r.value.replace(e,t));return i.set(r.before+o+r.after).select(n,n+o.length).record()},i.insert=function(e,t){var r=i.$(),n=r.start,o=r.end,c=r.value,u=r.before,a=r.after,s=u+e+a,l=e.length;return-1===t?(s=u+e+c+a,n+=l,o+=l):1===t?s=u+c+e+a:o=n+l,i.set(s).select(n,o).record()},i.insertBefore=function(e){return i.insert(e,-1)},i.insertAfter=function(e){return i.insert(e,1)},i.wrap=function(e,t,r){var n=i.$(),o=n.before,c=n.after,u=n.value;return r?i.replace(/^([\s\S]*?)$/,e+"$1"+t):i.set(o+e+u+t+c).select((o+e).length,(o+e+u).length).record()},i.unwrap=function(e,t,r){var n=i.$(),o=n.before,c=n.after,u=n.value;if(e=a(e),t=a(t),r)return i.replace(l("^"+e+"([\\s\\S]*?)"+t+"$"),"$1");var s=o.replace(l(e+"$"),""),f=c.replace(l("^"+t),"");return i.set(s+u+f).select(s.length,(s+u).length).record()},i.indent=function(e){var t=i.$(),e=r(e)?e:"\t";return t.length?i.replace(/^([^\n])/gm,e+"$1"):i.set(t.before+e+t.value+t.after).select(t.start+e.length).record()},i.outdent=function(e){var t,n=i.$(),e=r(e)?e:"\t";return e=a(e),n.length?i.replace(l("^"+e,"gm"),""):(t=n.before.replace(l(e+"$"),""),i.set(t+n.value+n.after).select(t.length).record())},i.trim=function(e,t,r,n){e=e||"",t=t||"",r=r||"",n=n||"";var o=i.$(),c=o.before,u=o.after,a=o.value,s=c.replace(/\s*$/,e),l=u.replace(/^\s*/,t),f=a.replace(/^\s*([\s\S]*?)\s*$/g,r+"$1"+n);return i.set(s+f+l).select(s.length,(s+f).length)},i.toggle=function(e,t){return r(t)?(e===!0?e=0:e===!1&&(e=1),o(t[e])?(t[e](i,e),i):i.select()):i.select()},i.record=function(e,n){if(p)return i;var o=d[h],u=i.$(),a=t(),s=u.start,l=u.end,e=r(e)?e:[a,s,l];return o&&c(o)&&o[0]===a&&o[1]===s&&o[2]===l?i:(h++,d[r(n)?n:h]=e,g=d.length,i)},i.loss=function(e){return e===!0?(d=[d[0]],h=0,i):(e=r(e)?e:h,e>h||h--,d.splice(e,1),g=d.length,i)},i.records=function(e,t){return r(e)?r(d[e])?d[e]:r(t)?t:!1:d},i.undo=function(){h--,h=s(h,0,g-1);var e=d[h];return i.set(e[0]).select(e[1],e[2])},i.redo=function(){h++,h=s(h,0,g-1);var e=d[h];return i.set(e[0]).select(e[1],e[2])},i.esc=function(e){if(c(e)){for(var t=[],r=e.length;r--;)t.unshift(i.esc(e[r]));return t}return e.replace(l("["+i.x.replace(/./g,"\\$&")+"]","g"),"\\$&")},i[0]=function(){return p=1,i},i[1]=function(e){return p=0,e===!1?i:i.record()},i.target=e,i};