/*!
 * ==========================================================
 *  TEXT EDITOR PLUGIN 2.5.1
 * ==========================================================
 * Author: Taufik Nurrohman <https://github.com/tovic>
 * License: MIT
 * ----------------------------------------------------------
 */
var TE=function(e){function t(){return e.value.replace(/\r/g,"")}function n(e){return void 0!==e}function r(e){return"string"==typeof e}function o(e){return"function"==typeof e}function i(e){return"object"==typeof e}function c(e){return e instanceof RegExp&&e.source?e.source:!1}function u(e){return e instanceof HTMLElement}function l(e){return c(e)||y._.x(e)}function a(e,t,n){return t>e?t:e>n?n:e}function s(e,t){return RegExp(e,t)}function f(e){return parseInt(e,10)}function p(e){return e.replace(/\-([a-z])/g,function(e,t){return t.toUpperCase()})}function d(e){return e.replace(/([A-Z])/g,function(e,t){return"-"+t.toLowerCase()})}function h(e,t){var n,r,o=v.getComputedStyle(e,null),i={};return t?(n=o[p(t)],r=f(n),0===r?0:r||n):function(){for(n in o)r=f(o[n]),i[d(n)]=0===r?0:r||o[n];return i}()}function g(e,t){t=t||{};for(var n in t)e[n]=i(e[n])&&i(t[n])&&!u(e[n])&&!u(t[n])?g(e[n],t[n]):t[n];return e}function b(o){var i,c,u,l,a,s="font-",f="text-",d="padding-",g="border-",b=["box-sizing","direction",s+"family",s+"size",s+"size-adjust",s+"stretch",s+"style",s+"variant",s+"weight","height","letter-spacing","line-height","overflow-x",d+"bottom",d+"left",d+"right",d+"top","tab-size",f+"align",f+"decoration",f+"indent",f+"transform","word-spacing"],y=m.body,k=b.length,$="INPUT"===e.nodeName;for(y.appendChild(T),i=T.style,c=h(e),console.log(c),a=c.width,i.whiteSpace="pre-wrap",$||(i.wordWrap="break-word"),i.position="absolute",i.visibility="hidden";--k;)l=c[b[k]],i[p(b[k])]=r(l)?l:l+"px";return i.overflowY=e.scrollHeight>c.height?"scroll":"auto",i.width=n(v.mozInnerScreenX)?a+"px":a+O+"px",E.textContent=t().substring(o)||".",l=t().substring(0,o),$&&(l=l.replace(/\s/g,C)),T.textContent=l,T.appendChild(E),u={x:E.offsetLeft+c[g+"left-width"],y:E.offsetTop+c[g+"top-width"]},y.removeChild(T),u}var v=window,m=document,y=this,k=1,$=0,w=[[t(),0,0,0]],x=0,_={},T=m.createElement("div"),E=m.createElement("span"),C="\xa0",L="\t",O=function(){var e,t=m.createElement("div"),n=m.body,r=t.style;return n.appendChild(t),r.position="absolute",r.top=r.left="-9999px",r.width=r.height="100px",r.overflow="scroll",r.visibility="hidden",e=t.offsetWidth-t.clientWidth,n.removeChild(t),e}();return y.type="",y.x="!$^*()-=+[]{}\\|:<>,./?",e.TE=y,TE.__instance__[e.id||e.name||Object.keys(TE.__instance__).length]=y,y.scroll=function(t){var o=e.scrollTop,i=h(e,"line-height"),c=h(e,"font-size");return n(t)?r(t)?(y.scroll(y.scroll()+("-"===t?-1:1)),y):(e.scrollTop=i*t+(i-c),y):Math.floor(o/i)},y.set=function(t){return e.value=t,y},y.get=function(e){return n(e)?t().length?t():e:t()},y.save=function(e,t){return _[e]=t,y},y.restore=function(e,t){return n(e)?n(_[e])?_[e]:n(t)?t:"":_},y.focus=function(r,o){return r===!0?(r=t().length,o=e.scrollHeight):r===!1&&(r=o=0),n(r)&&(e.selectionStart=e.selectionEnd=r,e.scrollTop=o),e.focus(),y},y.blur=function(){return e.blur(),y},y.$=function(n){var r=t().replace(/\r/g,""),o=e.selectionStart,i=e.selectionEnd,c=r.substring(o,i),u=n?[b(o),b(i)]:[];return{start:o,end:i,value:c,before:r.substring(0,o),after:r.substring(i),caret:u,length:c.length}},y.select=function(){var t,n=arguments,r=n.length,o=m.documentElement,i=m.body,c=e,u="scrollTop",l=y.$(),a="TE.scroll";if(y.save(a,[o[u],i[u],c[u]]).focus(),0===r)n[0]=l.start,n[1]=l.end;else if(1===r){if(n[0]===!0)return c.select(),y;n[1]=n[0]}return c.setSelectionRange(n[0],n[1]),t=y.restore(a,[0,0,0]),o[u]=t[0],i[u]=t[1],c[u]=t[2],y},y.match=function(e,t){var n=y.$().value.match(e);return o(t)?t(n||[]):!!n},y.replace=function(e,t,n){var r,o,i=y.$(),c=i.before,u=i.after,l=i.value;return-1===n?c=c.replace(e,t):1===n?u=u.replace(e,t):l=l.replace(e,t),r=c.length,o=r+l.length,y.set(c+l+u).select(r,o).record()},y.replaceBefore=function(e,t){return y.replace(e,t,-1)},y.replaceAfter=function(e,t){return y.replace(e,t,1)},y.insert=function(e,t,n){var r=/^[\s\S]*?$/;return y[0](),n&&y.replace(r,""),-1===t?r=/$/:1===t&&(r=/^/),y.replace(r,e,t)[1]()},y.insertBefore=function(e,t){return y.insert(e,-1,t)},y.insertAfter=function(e,t){return y.insert(e,1,t)},y.wrap=function(e,t,n){var r=y.$(),o=r.before,i=r.after,c=r.value;return n?y.replace(/^([\s\S]*?)$/,e+"$1"+t):y.set(o+e+c+t+i).select((o+e).length,(o+e+c).length).record()},y.unwrap=function(e,t,n){var r,o,i,c,u=y.$(),a=u.before,f=u.after,p=u.value;return e=l(e),t=l(t),i=s(e+"$"),c=s("^"+t),n?y.replace(s("^"+e+"([\\s\\S]*?)"+t+"$"),"$1"):i.test(a)&&c.test(f)?(r=a.replace(i,""),o=f.replace(c,""),y.set(r+p+o).select(r.length,(r+p).length).record()):y.select()},y.indent=function(e){var t=y.$(),e=n(e)?e:L;return t.length?y.replace(/^(?!$)/gm,e):y.set(t.before+e+t.value+t.after).select(t.start+e.length).record()},y.outdent=function(e){var t,r=y.$(),e=n(e)?e:L;return e=l(e),r.length?y.replace(s("^"+e,"gm"),""):(t=r.before.replace(s(e+"$"),""),y.set(t+r.value+r.after).select(t.length).record())},y.trim=function(e,t,n,r){e!==!1&&(e=e||""),t!==!1&&(t=t||""),n!==!1&&(n=n||""),r!==!1&&(r=r||"");var o=y.$(),i=o.before,c=o.after,u=o.value,l=e!==!1?i.replace(/\s*$/,e):i,a=t!==!1?c.replace(/^\s*/,t):c,s=u.replace(/^(\s*)([\s\S]*?)(\s*)$/g,(n!==!1?n:"$1")+"$2"+(r!==!1?r:"$3"));return y.set(l+s+a).select(l.length,(l+s).length)},y.toggle=function(e,t){return n(t)?(e===!0?e=0:e===!1&&(e=1),o(t[e])?(t[e](y,e),y):y.select()):y.select()},y.record=function(e,r){if($)return y;var o=w[x],c=y.$(),u=t(),l=c.start,a=c.end,e=n(e)?e:[u,l,a,y.scroll()];return o&&i(o)&&o[0]===u&&o[1]===l&&o[2]===a?y:(x++,w[n(r)?r:x]=e,k=w.length,y)},y.loss=function(e){return e===!0?(w=[w[0]],x=0,y):(e=n(e)?e:x,e>x||x--,w.splice(e,1),k=w.length,y)},y.records=function(e,t){return n(e)?n(w[e])?w[e]:n(t)?t:!1:w},y.undo=function(){x--,x=a(x,0,k-1);var e=w[x];return y.set(e[0]).select(e[1],e[2]).scroll(e[3])},y.redo=function(){x++,x=a(x,0,k-1);var e=w[x];return y.set(e[0]).select(e[1],e[2]).scroll(e[3])},y._={x:function(e){if(i(e)){for(var t=[],n=e.length;n--;)t.unshift(y._.x(e[n]));return t}return e.replace(s("["+y.x.replace(/./g,"\\$&")+"]","g"),"\\$&")},extend:g,each:function(e,t){var n,r;for(r in e)if(n=t(e[r],r,e),n!==!0&&n===!1)break;return e},css:h},y[0]=function(){return $=1,y},y[1]=function(e){return $=0,e===!1?y:y.record()},y.target=e,y};!function(e){function t(e){return e.toLowerCase()}var n,r;for(e.version="2.5.1",e.__instance__={},e.each=function(t,n){return setTimeout(function(){var n,r=e.__instance__;for(n in r)t(r[n],n)},0===n?0:n||1),e},e.keys={3:"cancel",6:"help",8:"backspace",9:"tab",12:"clear",13:"enter",16:"shift",17:"control",18:"alt",19:"pause",20:"capslock",27:"escape",28:"convert",29:"nonconvert",30:"accept",31:"modechange",33:"pageup",34:"pagedown",35:"end",36:"home",37:"arrowleft",38:"arrowup",39:"arrowright",40:"arrowdown",41:"select",42:"print",43:"execute",44:"printscreen",45:"insert",46:"delete",91:"meta",93:"contextmenu",144:"numlock",145:"scrolllock",181:"volumemute",182:"volumedown",183:"volumeup",224:"meta",225:"altgraph",246:"attn",247:"crsel",248:"exsel",249:"eraseeof",250:"play",251:"zoomout",48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],32:" ",59:[";",":"],61:["=","+"],173:["-","_"],188:[",","<"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']},e.keys_alias={alternate:"alt",option:"alt",ctrl:"control",cmd:"meta",command:"meta",os:"meta",context:"contextmenu",return:"enter",ins:"insert",del:"delete",esc:"escape",left:"arrowleft",right:"arrowright",up:"arrowup",down:"arrowdown",space:" ",plus:"+"},n=1;25>n;++n)e.keys[111+n]="f"+n;for(r="",n=65;91>n;++n)e.keys[n]=t(String.fromCharCode(n));Object.defineProperty(KeyboardEvent.prototype,"TE",{configurable:!0,get:function(){function n(e,n){return e&&e!==!0?(e=t(e),n&&(o[e]||e)===c):n}var r=e.keys,o=e.keys_alias,i=this,c=i.key?t(i.key):r[i.which||i.keyCode];return"object"==typeof c&&(c=i.shiftKey?c[1]||c[0]:c[0]),c=t(c),{key:function(e){return e&&e!==!0?e instanceof RegExp?e.test(c):(e=t(e),(o[e]||e)===c):c},control:function(e){return n(e,i.ctrlKey)},shift:function(e){return n(e,i.shiftKey)},option:function(e){return n(e,i.altKey)},meta:function(e){return n(e,i.metaKey)}}}})}(TE);